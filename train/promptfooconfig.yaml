---

prompts:
  - |
    You are an AI assistant that generates concise and meaningful git commit messages based on provided diffs. Please adhere to the following guidelines:

    - Structure: Begin with a clear, present-tense summary.
    - Content: Emphasize the changes and their rationale, excluding irrelevant details.
    - Consistency: Maintain uniformity in tense, punctuation, and capitalization.
    - Accuracy: Ensure the message accurately reflects the changes and their purpose.
    - Present tense, imperative mood. (e.g., "Add x to y" instead of "Added x to y")

    ## Output:

    Your output should be a commit message generated from the input diff and nothing else.

    ## Input:

    INPUT: {{diff}}

defaultTest:
  options:
    provider: openai:gpt-4-turbo

providers:
  # starcoder2
  - id: ollama:starcoder2:latest
    label: starcoder2-temp-0-1
    config:
      temperature: 0.1
      max_tokens: 72
  - id: ollama:starcoder2:latest
    label: starcoder2-temp-0-7
    config:
      temperature: 0.9
      max_tokens: 72
  # deepseek-coder
  # - id: ollama:deepseek-coder:latest
  #   label: deepseek-coder-temp-0-1
  #   config:
  #     temperature: 0.1
  #     max_tokens: 72
  # - id: ollama:deepseek-coder:latest
  #   label: deepseek-coder-temp-0-7
  #   config:
  #     temperature: 0.9
  #     max_tokens: 72
  # codeup
  - id: ollama:codeup:latest
    label: codeup-temp-0-1
    config:
      temperature: 0.1
      max_tokens: 72
  - id: ollama:codeup:latest
    label: codeup-temp-0-7
    config:
      temperature: 0.9
      max_tokens: 72
  # codellama
  - id: ollama:codellama:13b
    label: codellama-13b-temp-0-1
    config:
      temperature: 0.1
      max_tokens: 72
  - id: ollama:codellama:13b
    label: codellama-13b-temp-0-7
    config:
      temperature: 0.9
      max_tokens: 72
  # codegemma
  - id: ollama:codegemma:latest
    label: temperature-0-1
    config:
      temperature: 0.1
      max_tokens: 72
  - id: ollama:codegemma:latest
    label: temperature-0-7
    config:
      temperature: 0.9
      max_tokens: 72
  # gpt-4
  - id: openai:gpt-4
    label: gpt-4
    config:
      max_tokens: 72
      temperature: 0.1
  - id: openai:gpt-4
    label: gpt-4
    config:
      max_tokens: 72
      temperature: 0.7
scenarios:
  - config:
    - vars:
        diff: "diff --git a/README.md b/README.md\nindex 5f4a4b3..b3b1b3e 100644\n--- a/README.md\n+++ b/README.md\n@@ -1,3 +1,5 @@\n # AI Assistant\n\n+## Welcome\n+\n You are an AI assistant that generates concise and meaningful git commit messages based on provided diffs."
        commit: "Added welcome section to readme"
    tests:
      - assert:
        - type: factuality
          value: "{{commit}}"
        - type: llm-rubric
          value: No wrapper text followed by :, like "Output:", "Commit message:" or "##"
        - type: llm-rubric
          value: "Ensure output has a similar mening to {{commit}}"
        - type: llm-rubric
          value: The output uses present tense and imperative mood, i.e., "Add x to y" instead of "Added x to y"
        - type: javascript
          value: Math.abs(output.length) < (72 * 1.3)
